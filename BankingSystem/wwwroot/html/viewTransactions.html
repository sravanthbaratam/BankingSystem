<br />
<h6 class="col text-center">Account Summary</h6>
<div class="col">
    <div class="col" id="errorDiv"></div>
    <table class="table table-striped table-bordered" id="serviceTable">
        <thead class="thead-light">
            <tr class="text-white text-center">
                <th class="bg-primary text-white">Name</th>
                <th class="bg-primary text-white">Account Number</th>
                <th class="bg-primary text-white">Account Type</th>
                <th class="bg-primary text-white">Balance</th>
                <th class="bg-primary text-white">Email</th>
                <th class="bg-primary text-white">Mobile</th>
                <th class="bg-primary text-white">Address</th>
            </tr>
        </thead>
        <tbody id="tbody"></tbody>
    </table>
    <br />
    <h6 class="col text-center">Account Transactions</h6>
    <table class="table table-striped table-bordered" id="transactionTable">
        <caption>List of Transactions</caption>
        <thead class="thead-light">
            <tr class="text-white text-center">
                <th class="bg-success text-white">TransactionId</th>
                <th class="bg-success text-white">TransactionType</th>
                <th class="bg-success text-white">Amount</th>
                <th class="bg-success text-white">RecieverAccount</th>
                <th class="bg-success text-white">TimeStamp</th>
            </tr>
        </thead>
        <tbody id="transactionbody"></tbody>
    </table>
</div>
<script type="text/javascript">
    jQuery(document).ready(function () {
        var html = null;
        var body = null;
        var data = { AccountNumber: jQuery.cookie("user") };
        var response = Request.post("/Bank/ViewTransactions", data);
        if (response.successfull) {            
            html += "<tr>";
                html += "<td>" + response.responseObject.name + "</td>";
                html += "<td class='text-right'>" + response.responseObject.accountNumber + "</td>";
                html += "<td>" + Request.getAccountType(response.responseObject.accountType) + "</td>";
                html += "<td class='text-right'>" + response.responseObject.balance + "</td>";
                html += "<td>" + response.responseObject.email + "</td>";
                html += "<td class='text-right'>" + response.responseObject.mobile + "</td>";
                html += "<td>" + response.responseObject.address + "</td>";
            html += "</tr>";
            if (response.responseObject.transactions.length > 0) {
                for (i = 0; i <= response.responseObject.transactions.length - 1; i++) {
                    body += "<tr>";
                        body += "<td class='text-right'>" + response.responseObject.transactions[i].transactionId + "</td>";                        
                        body += "<td>" + Request.getTransactionType(response.responseObject.transactions[i].transactionType) + "</td>";
                        body += "<td class='text-right'>" + response.responseObject.transactions[i].amount + "</td>";
                        body += "<td class='text-right'>" + response.responseObject.transactions[i].recieverAccount + "</td>";
                        body += "<td class='text-center'>" + response.responseObject.transactions[i].timeStamp + "</td>";
                    body += "</tr>";
                }
            }
            else {
                body = null;
                body += "<tr>";
                body += "<td colspan = '5' class='text-center'>We did not found any transaction(s) in your account</td>";
                body += "</tr>";            
            }                      
        }
        else {
            html = null;
            html += "<tr>";
            html += "<td colspan = '6' class='text-center'>" + response.errorMessage + "</td>";
            html += "</tr>";
            body = null;
            body += "<tr>";
            body += "<td colspan = '5' class='text-center'>We did not found any transaction(s) in your account</td>";
            body += "</tr>";
            Request.showError(response.errorMessage);
        }
        jQuery("#tbody").html(html);
        jQuery("#transactionbody").html(body);        
        jQuery("#transactionTable").DataTable();
    });
</script>